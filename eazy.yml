eazyVersion: '1.0'
releases:
  - 'latest'
  - '0.0.1'
image: 'shibbybird/eazy-ci-kotlin-test-service'
deployment:
  ports:
    - 7070
  health:
    - '/bin/sh'
    - '-c'
    - 'while ! curl http://host.docker.internal:7070/health; do sleep 1; done;'
integration:
  bootstrap:
    - '/bin/sh'
    - '-c'
    - 'cqlsh host.docker.internal --cqlversion=3.4.4 -f /root/build/cassandra/init.cql'
  runTest:
    - '/bin/sh'
    - '-c'
    - './gradlew integration'
  peerDependencies:
    - 'github.com/shibbybird/eazy-ci-kafka'
    - 'github.com/shibbybird/eazy-ci-cassandra'
